%div#nav
  %div#groups.nav
    %h2 Groups
    %ul
      - if !Visage::Config.rrddir
        %li
          You need to specify <strong>rrddir</strong> in config/init.rb!
      - elsif @groups.empty?
        %li
          No groups found. Please check <strong>rrddir</strong> in config/init.rb!
      - else
        - @groups.each_pair do |group, hosts|
          %p.groupes
          %a{:href => "#", :onclick => "showHide('#{group}')" } #{group.capitalize}
          %div{:id => group, :style => "display:none"}
            - hosts.each do |h|
              %li
                %a{:href => "/#{h}"} #{h}
          

  - if host = params[:host]
    %div#profiles.nav
      %h2 Profiles for #{host}

      %ul
        - @profiles.each do |profile|
          %li
            %a{:href => "/#{host}/#{profile.splat}"}= profile.name

%div#graphs
  - if @profile && @profile.plugins
    - @profile.plugins.each do |graph|
      - plugin, plugin_instances =  graph.split('/', 2)
      - graph_id = "graph#{graph.gsub(/[^\w+]/, '_')}"
      %div.graph
        %div{:id => graph_id}
        :javascript
          window.addEvent('domready', function() {
            var graph = new visageGraph('#{graph_id}', '#{params[:host]}', '#{plugin}', {
              width: 900,
              height: 220,
              gridWidth: 800,
              gridHeight: 200,
              shade: #{Visage::Config.shade || false},
              pluginInstance: '#{plugin_instances || ''}',
              name: '#{plugin} on #{host}'
            });
          });
  
  - else
    %div#nothing
      Sorry, nothing to display!
  
